// 4. Tier-3: Elasticsearch integration (skeleton)
// ------------------------------------------------
// 1) Define ES document and repository:
// WorkflowDocument.java
package com.example.workflow.search;

import org.springframework.data.annotation.Id;
import org.springframework.data.elasticsearch.annotations.Document;

@Document(indexName = "workflows")
public class WorkflowDocument {
    @Id
    private String workflowStrId;
    private String name;
    private String description;
    // getters & setters
}

// WorkflowSearchRepository.java
package com.example.workflow.search;

import org.springframework.data.elasticsearch.repository.ElasticsearchRepository;
import java.util.List;

public interface WorkflowSearchRepository
    extends ElasticsearchRepository<WorkflowDocument, String> {
    List<WorkflowDocument> findByNameOrDescription(String name, String description);
}

// 2) Controller endpoint:
@RestController
@RequestMapping("/workflows")
public class WorkflowController {
    @Autowired
    private WorkflowSearchRepository esRepo;

    @GetMapping("/suggest")
    public List<String> suggest(@RequestParam("q") String q) {
        return esRepo.findByNameOrDescription(q, q).stream()
            .map(WorkflowDocument::getWorkflowStrId)
            .collect(Collectors.toList());
    }
}
